extends layouts/main
include mixins/videoPlayer

block content
    .videoDetail
        +videoPlayer({
            src:video.fileUrl
        })(class="videoDetail__player")
        .videoDetail__info
            if loggedInUser && loggedInUser.id === video.creator.id
                a(href=routes.editVideo(video.id)).videoDetail__info-edit 
                    i.far.fa-edit
                    span Edit Video
            h1.videoDetail__info-title=video.title
            span.videoDetail__info-views #{video.views} views
            section.videoDetail__info-creator
                a(href=routes.userDetail(video.creator.id))
                    img(src=`/${video.creator.avatarUrl}`)
                a(href=routes.userDetail(video.creator.id) title=`created by ${video.creator.name}`)=video.creator.name
            h2.videoDetail__info-description=video.description
            if video.comments.length === 1
                span.videoDetail__info-comments 1 comment
            else
                span.videoDetail__info-comments #{video.comments.length} comments
        .videoDetail__comments
            form.videoDetail__comments__form
                if loggedInUser && loggedInUser.avatarUrl
                    a(href=routes.userDetail(loggedInUser.id))
                        img(src=`/${loggedInUser.avatarUrl}`)
                else
                    img(src="https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/120/apple/271/person_1f9d1.png")
                input(type="text", placeholder="Add a comment")
            ul.videoDetail__comments__comments
                each comment in video.comments
                    li
                        span=comment.text
                        span=comment.creator
                        span=comment.createdAt